arrange(desc(n))
ggplot() +
geom_sf(data = kbdi_max_2090_sf, aes(color = kbdi_max_2090)) +
scale_color_viridis(option = "B") +
geom_sf(data = us_states_west, color = "white", fill = NA) +
labs(color = "KBDI") +
theme_minimal()
wells_kbdi %>%
filter(kbdi_max_2090 >= 400) %>%
group_by(state) %>%
summarize(n = n()) %>%
ggplot() +
geom_bar(aes(state, n), stat = "identity") +
theme_classic()
wells_kbdi %>%
filter(kbdi_max_2090 >= 400) %>%
group_by(state) %>%
summarize(n = n()) %>%
arrange(desc(n))
wells_kbdi %>%
filter(kbdi_max_2090 >= 400) %>%
group_by(county_parish) %>%
summarize(n = n()) %>%
arrange(desc(n))
wells_kbdi %>%
filter(kbdi_max_2090 >= 400) %>%
group_by(operator) %>%
summarize(n = n()) %>%
arrange(desc(n))
# attaches functions .....................................................
source("code/0-setup/01-setup.R")
source("code/2-exposure_assessment/01-fxn-count_wells_in_wildfires.R")
library("parallel")   # for the `mclapply()` fxn, if using MacOS
library("lubridate")  # for `Year()` fxn
# data input .............................................................
wells_all     <- readRDS("data/processed/wells_all.rds")
wildfires_all <- readRDS("data/processed/wildfires_all.rds")
# attaches functions .....................................................
source("code/0-setup/01-setup.R")
# data input .............................................................
wells_all     <- readRDS("data/processed/wells_all.rds")
summary(as.factor(wells_all$state))
length(unique(wells_all$state))
# attaches functions
source("code/0-setup/01-setup.R")
# data input
wildfires_all <- readRDS("data/processed/wildfires_all.rds")
# assembles dataset with the number of oil and gas wells drilled before the
# wildfire year or with no development dates within the wildfire burn area;
# restricted to wildfires with ≥ 1 well within 1 km of the wildfire boundary,
# so we'll need to join with the full wildfires dataset and add 0s below
wildfires_wells <-
read_csv("data/processed/wildfires_wells/wildfires_wells_ak.csv") %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ar.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_az.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ca.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_co.csv")) %>%
# I commented out states that have no wildfires with wells due to bind issue
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ks.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_la.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_mo.csv")) %>% #
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_mt.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_nd.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ne.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_nm.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_nv.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ok.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_or.csv")) %>% #
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_sd.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_tx.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ut.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_wy.csv")) %>%
as_tibble() %>%
# retain wildfire_id to join with other datasets below
mutate(wildfire_id = as.factor(wildfire_id),
state       = as.factor(state)) %>%
select(wildfire_id, state, n_wells)
# assembles dataset with the number of oil and gas wells drilled before the
# wildfire year or with no development dates within the wildfire burn area;
# restricted to wildfires with ≥ 1 well within 1 km of the wildfire boundary,
# so we'll need to join with the full wildfires dataset and add 0s below
wildfires_wells <-
read_csv("data/processed/wildfires_wells/wildfires_wells_ak.csv") %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ar.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_az.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ca.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_co.csv")) %>%
# I commented out states that have no wildfires with wells due to bind issue
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ks.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_la.csv")) %>%
# bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_mo.csv")) %>% #
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_mt.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_nd.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ne.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_nm.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_nv.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ok.csv")) %>%
# bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_or.csv")) %>% #
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_sd.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_tx.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ut.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_wy.csv")) %>%
as_tibble() %>%
# retain wildfire_id to join with other datasets below
mutate(wildfire_id = as.factor(wildfire_id),
state       = as.factor(state)) %>%
select(wildfire_id, state, n_wells)
View(wildfires_wells)
# assembles dataset with the number of oil and gas wells drilled before the
# wildfire year or with no development dates within 1km of the burn area;
# restricted to wildfires with ≥ 1 well within 1 km of the wildfire boundary,
# so we'll need to join with the full wildfires dataset and add 0s below
wildfires_wells_buffer_1km <-
read_csv("data/processed/wildfires_wells/wildfires_wells_ak_buffer_1km.csv") %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ar_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_az_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ca_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_co_buffer_1km.csv")) %>%
# I commented out states that have no wildfires with wells due to bind issue
#bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_id_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ks_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_la_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_mo_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_mt_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_nd_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ne_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_nm_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_nv_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ok_buffer_1km.csv")) %>%
#bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_or_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_sd_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_tx_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ut_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_wa_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_wy_buffer_1km.csv")) %>%
as_tibble() %>%
# retain wildfire_id to join with other datasets below
mutate(wildfire_id = as.factor(wildfire_id),
state       = as.factor(state)) %>%
select(wildfire_id, state, n_wells_buffer_1km)
d_mo <- read_csv("data/processed/wildfires_wells/wildfires_wells_mo.csv")
d_ak <- read_csv("data/processed/wildfires_wells/wildfires_wells_ak.csv")
d_or <- bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_or.csv")
)
d_or <- read_csv("data/processed/wildfires_wells/wildfires_wells_or.csv")
d_or <- read_csv("data/processed/wildfires_wells/wildfires_wells_or.csv")
d_or
d_or2<- read_csv("data/processed/wildfires_wells/wildfires_wells_mo_buffer_1km.csv")
d_or2 <- read_csv("data/processed/wildfires_wells/wildfires_wells_or_buffer_1km.csv")
rm(d_ak)
rm(d_mo, d_or, d_or2)
# assembles dataset with the number of oil and gas wells drilled before the
# wildfire year or with no development dates within the wildfire burn area;
# restricted to wildfires with ≥ 1 well within 1 km of the wildfire boundary,
# so we'll need to join with the full wildfires dataset and add 0s below
wildfires_wells <-
read_csv("data/processed/wildfires_wells/wildfires_wells_ak.csv") %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ar.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_az.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ca.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_co.csv")) %>%
# I commented out states that have no wildfires with wells, as the fact that
# these datasets have 0 rows generates an error with `bind_rows()`
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ks.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_la.csv")) %>%
# bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_mo.csv")) %>% #
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_mt.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_nd.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ne.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_nm.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_nv.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ok.csv")) %>%
# bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_or.csv")) %>% #
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_sd.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_tx.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ut.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_wy.csv")) %>%
as_tibble() %>%
# retain wildfire_id to join with other datasets below
mutate(wildfire_id = as.factor(wildfire_id),
state       = as.factor(state)) %>%
select(wildfire_id, state, n_wells)
# assembles dataset with the number of oil and gas wells drilled before the
# wildfire year or with no development dates within 1km of the burn area;
# restricted to wildfires with ≥ 1 well within 1 km of the wildfire boundary,
# so we'll need to join with the full wildfires dataset and add 0s below
wildfires_wells_buffer_1km <-
read_csv("data/processed/wildfires_wells/wildfires_wells_ak_buffer_1km.csv") %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ar_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_az_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ca_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_co_buffer_1km.csv")) %>%
# I commented out states that have no wildfires with wells, as the fact that
# these datasets have 0 rows generates an error with `bind_rows()`
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ks_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_la_buffer_1km.csv")) %>%
#bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_mo_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_mt_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_nd_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ne_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_nm_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_nv_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ok_buffer_1km.csv")) %>%
#bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_or_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_sd_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_tx_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_ut_buffer_1km.csv")) %>%
bind_rows(read_csv("data/processed/wildfires_wells/wildfires_wells_wy_buffer_1km.csv")) %>%
as_tibble() %>%
# retain wildfire_id to join with other datasets below
mutate(wildfire_id = as.factor(wildfire_id),
state       = as.factor(state)) %>%
select(wildfire_id, state, n_wells_buffer_1km)
# merges assessments of wells in/near wildfires and exposed populations
wildfires_wells_population <- wildfires_all %>%
left_join(wildfires_wells,            by = c("wildfire_id", "state")) %>%
left_join(wildfires_wells_buffer_1km, by = c("wildfire_id", "state")) %>%
##### add sensitivity analysis for wells with dates
#left_join(wildfires_wells_population, by = c(wildfire_id, data_source)) %>%
# replaces NAs with 0s, for wildfires omitted from above analyses because
# they were not near wells
mutate(n_wells              = replace_na(n_wells, 0),
n_wells_buffer_1km   = replace_na(n_wells_buffer_1km, 0)) %>% #,
#n_population_exposed = replace_na(n_population_exposed, 0)) %>%
as_tibble() %>%
select(-geometry)
# export
saveRDS(wildfires_wells_population,
"data/processed/wildfires_wells_population.rds")
write_csv(wildfires_wells_population,
"data/processed/wildfires_wells_population.csv")
source("../../code/0-setup/01-setup.R")
wildfires_wells_population <-
readRDS("../../data/processed/wildfires_wells_population.rds")
source("../../code/0-setup/01-setup.R")
wildfires_wells_population <-
readRDS("../../data/processed/wildfires_wells_population.rds")
wildfires_wells_population %>% arrange(desc(n_wells)) %>% select(-data_source)
wildfires_wells_population %>%
distinct(wildfire_id, .keep_all = TRUE) %>%
filter(year %in% c(1984:2020)) %>%
group_by(year) %>%
summarize(n = n()) %>%
ggplot() +
geom_bar(aes(year, n), stat = "identity") +
labs(x = "Year", y = "Wildfires, n") +
ylim(0, 3700) +
theme_classic()
wildfires_wells_population %>%
filter(year %in% c(1984:2020)) %>%
filter(n_wells > 0) %>%
group_by(year) %>%
summarize(n = n()) %>%
ggplot() +
geom_bar(aes(year, n), stat = "identity") +
labs(x = "Year", y = "Wildfires, n") +
ylim(0, 3700) +
theme_classic()
wildfires_wells_population %>%
mutate(wildfire_burned_wells = case_when(n_wells >= 1 ~ 1,
n_wells == 0 ~ 0)) %>%
group_by(year) %>%
summarize(n_wildfires = n(),
n_wildfires_with_wells = sum(wildfire_burned_wells)) %>%
mutate(perc_wildfires_with_wells =
round((100 * n_wildfires_with_wells / n_wildfires), digits = 2))
wildfires_wells_population %>%
mutate(wildfire_burned_wells = case_when(n_wells >= 1 ~ 1,
n_wells == 0 ~ 0)) %>%
group_by(year) %>%
summarize(n_wildfires = n(),
n_wildfires_with_wells = sum(wildfire_burned_wells)) %>%
mutate(proportion_wildfires_with_wells =
round((n_wildfires_with_wells / n_wildfires), digits = 2)) %>%
ggplot(aes(year, proportion_wildfires_with_wells)) +
geom_bar(stat = "identity") +
theme_classic()
wildfires_wells_population %>%
mutate(wildfire_burned_wells = case_when(n_wells >= 1 ~ 1,
n_wells == 0 ~ 0)) %>%
group_by(year) %>%
summarize(n_wildfires = n(),
n_wildfires_with_wells = sum(wildfire_burned_wells)) %>%
mutate(proportion_wildfires_with_wells =
round((n_wildfires_with_wells / n_wildfires), digits = 2)) %>%
ggplot(aes(year, proportion_wildfires_with_wells)) +
geom_point() +
geom_smooth(method = lm, formula = "y ~ x") +
theme_classic()
wildfires_wells_population %>%
group_by(state) %>%
summarize(n_wells_by_state = sum(n_wells),
n_wells_buffer_1km_by_state = sum(n_wells_buffer_1km)) %>%
arrange(desc(n_wells_by_state))
wildfires_wells_population %>%
filter(year %in% c(1984:2020)) %>%
group_by(year) %>%
summarize(n = sum(n_wells)) %>%
ggplot() +
geom_bar(aes(year, n), stat = "identity") +
labs(x = "Year", y = "Wells, n") +
theme_classic()
wildfires_wells_population %>%
filter(year %in% c(1984:2020)) %>%
group_by(year) %>%
summarize(n = sum(n_wells)) %>%
ggplot() +
geom_point(aes(year, n)) +
geom_smooth(aes(year, n), method = lm, formula = "y ~ x") +
labs(x = "Year", y = "Wells, n") +
theme_classic()
wildfires_wells_population %>%
filter(year %in% c(1984:2020)) %>%
group_by(year, state) %>%
summarize(n = n()) %>%
ggplot() +
geom_bar(aes(year, n), stat = "identity") +
labs(x = "Year", y = "Wildfires, n") +
facet_wrap(~ state) +
theme_classic()
wildfires_wells_population %>%
filter(year %in% c(1984:2020)) %>%
filter(n_wells > 0) %>%
group_by(year, state) %>%
summarize(n = n()) %>%
ggplot() +
geom_bar(aes(year, n), stat = "identity") +
labs(x = "Year", y = "Wildfires, n") +
facet_wrap(~ state) +
theme_classic()
wildfires_wells_population %>%
mutate(wildfire_burned_wells = case_when(n_wells >= 1 ~ 1,
n_wells == 0 ~ 0)) %>%
group_by(state) %>%
summarize(n_wildfires = n(),
n_wildfires_with_wells = sum(wildfire_burned_wells)) %>%
mutate(proportion_wildfires_with_wells =
round((n_wildfires_with_wells / n_wildfires), digits = 2)) %>%
ggplot(aes(state, proportion_wildfires_with_wells)) +
geom_bar(stat = "identity") +
theme_classic()
wildfires_wells_population %>%
filter(year %in% c(1984:2020)) %>%
group_by(year, state) %>%
summarize(n     = sum(n_wells)) %>%
ggplot() +
geom_bar(aes(year, n), stat = "identity") +
labs(x = "Year", y = "Wells, n") +
facet_wrap(. ~ state) +
theme_classic()
## assessments by state-year =================================================
wells_wildfire_year <-
read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_ak.csv") %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_ar.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_az.csv"))
# attaches functions .....................................................
source("code/0-setup/01-setup.R")
## assessments by state-year =================================================
wells_wildfire_year <-
read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_ak.csv") %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_ar.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_az.csv"))
View(wells_wildfire_year)
## assessments by state-year =================================================
wells_wildfire_year <-
read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_ak.csv") %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_ar.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_az.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_ca.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_co.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_ks.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_la.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_mo.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_mt.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_nd.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_ne.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_nm.csv")) #%>%
write_csv(wells_wildfire_year, "data/processed/wells_wildfire_year.csv")
saveRDS(wells_wildfire_year,   "data/processed/wells_wildfire_year.rds")
saveRDS(wells_wildfire_year,   "data/processed/wells_wildfire_state_year.rds")
write_csv(wells_wildfire_year, "data/processed/wells_wildfire_state_year.csv")
## assessments by state-year =================================================
wells_wildfire_state_year <-
read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_ak.csv") %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_ar.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_az.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_ca.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_co.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_ks.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_la.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_mo.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_mt.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_nd.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_ne.csv")) %>%
bind_rows(read_csv("data/interim/wells_wildfire_year/wells_wildfire_year_nm.csv")) #%>%
saveRDS(wells_wildfire_state_year,
"data/processed/wells_wildfire_state_year.rds")
write_csv(wells_wildfire_state_year,
"data/processed/wells_wildfire_state_year.csv")
rm(wells_wildfire_year)
source("../../code/0-setup/01-setup.R")
wells_wildfire_state_year <-
readRDS("../../data/processed/wells_wildfire_state_year.rds")
wells_wildfire_state_year %>%
filter(year %in% c(1984:2020)) %>%
group_by(year) %>%
summarize(n = sum(n_wells)) %>%
ggplot() +
geom_bar(aes(year, n), stat = "identity") +
labs(x = "Year", y = "Wells, n") +
theme_classic()
wells_wildfire_state_year %>%
filter(year %in% c(1984:2020)) %>%
group_by(year) %>%
summarize(n = sum(n_wells))
wells_wildfire_state_year %>%
filter(year %in% c(1984:2020)) %>%
group_by(year) %>%
summarize(n = sum(n_wells, n_wells_buffer_1km))
wells_wildfire_state_year %>%
filter(year %in% c(1984:2020)) %>%
group_by(year) %>%
summarize(n = sum(n_wells),
n_wells_buffer_1km = sum(n_wells_buffer_1km))
wells_wildfire_state_year %>%
filter(year %in% c(1984:2020)) %>%
group_by(year) %>%
summarize(n = sum(n_wells)) %>%
ggplot() +
geom_bar(aes(year, n), stat = "identity") +
labs(x = "Year", y = "Wells, n") +
theme_classic() %>%
facet_wrap(. ~ state)
wells_wildfire_state_year %>%
filter(year %in% c(1984:2020)) %>%
group_by(year) %>%
summarize(n = sum(n_wells)) %>%
ggplot() +
geom_bar(aes(year, n), stat = "identity") +
labs(x = "Year", y = "Wells, n") +
theme_classic() %>%
facet_wrap( ~ state)
wells_wildfire_state_year %>%
filter(year %in% c(1984:2020)) %>%
group_by(year) %>%
summarize(n = sum(n_wells)) %>%
ggplot() +
geom_bar(aes(year, n), stat = "identity") +
labs(x = "Year", y = "Wells, n") +
facet_wrap(. ~ state) +
theme_classic()
wells_wildfire_state_year %>%
group_by(year) %>%
summarize(n = sum(n_wells)) %>%
ggplot() +
geom_bar(aes(year, n), stat = "identity") +
labs(x = "Year", y = "Wells, n") +
theme_classic()
wells_wildfire_state_year %>%
group_by(state, year) %>%
summarize(n = sum(n_wells)) %>%
ggplot() +
geom_bar(aes(year, n), stat = "identity") +
labs(x = "Year", y = "Wells, n") +
facet_wrap(. ~ state) +
theme_classic()
wells_wildfire_state_year %>%
group_by(state) %>%
summarize(n_wells_by_state = sum(n_wells),
n_wells_buffer_1km_by_state = sum(n_wells_buffer_1km)) %>%
arrange(desc(n_wells_by_state))
wells_wildfire_state_year %>%
group_by(year) %>%
summarize(n = sum(n_wells)) %>%
ggplot(aes(year, n)) +
geom_point() +
labs(x = "Year", y = "Wells, n") +
theme_classic()
wells_wildfire_state_year %>%
group_by(year) %>%
summarize(n = sum(n_wells)) %>%
ggplot(aes(year, n)) +
geom_point() +
geom_smooth(method = "loess", color = "green") +
geom_smooth(method = "lm", color = "blue") +
labs(x = "Year", y = "Wells, n") +
theme_classic()
wells_wildfire_state_year %>%
group_by(year) %>%
summarize(n = sum(n_wells_buffer_1km)) %>%
ggplot(aes(year, n)) +
geom_point() +
geom_smooth(method = "loess", color = "green") +
geom_smooth(method = "lm", color = "blue") +
labs(x = "Year", y = "Wells, n") +
theme_classic()
fit <- glm(n_wells ~ year, data = wells_wildfire_state_year)
summary(fit)
summary(glm(n_wells_buffer_1km ~ year, data = wells_wildfire_state_year))
summary(glm(n_wells ~ year, data = subset(wells_wildfire_state_year, state = "CA")))
summary(glm(n_wellsn_wells_buffer_1km ~ year, data = subset(wells_wildfire_state_year, state = "CA")))
summary(glm(n_wells_buffer_1km ~ year, data = subset(wells_wildfire_state_year, state = "CA")))
d <- wells_wildfire_state_year %>%
group_by(year) %>%
summarize(n = sum(n_wells_buffer_1km))
summary(glm(n_wells_buffer_1km ~ year, data = d))
summary(glm(n ~ year, data = d))
summary(glm(n_wells_buffer_1km ~ year + factor(state), data = wells_wildfire_state_year, state = "CA"))
summary(glm(n_wells_buffer_1km ~ year + factor(state), data = wells_wildfire_state_year))
rm(d)
rm(fit)
summary(glm(n_wells ~ year + factor(state), data = wells_wildfire_state_year))
