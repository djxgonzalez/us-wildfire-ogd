geom_sf(data = kbdi_600_2090, shape = 15, color = "#F0A3D0", size = 0.4) +
geom_sf(data = us_states_east, color = NA, fill = "#D4D4D4") +
geom_sf(data = us_states,   color = "white", fill = NA, lwd = 0.2) +
geom_sf(data = us_boundary, color = "white", fill = NA, lwd = 0.3) +
geom_sf(data = wells_all_buffer_1km, fill = "black", color = NA, alpha = 0.6) +
xlim(-2300000, 560000) + ylim(340000, 3100000) +  # origin: 96W, 23N
labs(x = "", y = "") +
theme_void() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),
panel.grid       = element_line(color = "#e9f5f8"),
legend.position = "none")
# export
ggsave(filename = "figure_4f.png", plot = figure_4f, device = "png",
height = 4.818, width = 5, path = "output/figures/components/")
##============================================================================##
# figure 4a ................................................................
figure_4a <- ggplot() +
geom_sf(data = mex_can,   color = NA, fill = "#D4D4D4") +
geom_sf(data = us_states, color = NA, fill = "#E5E5E5", alpha = 0.7) +
geom_sf(data = kbdi_450_2017, shape = 15, color = "#AD8ABB", size = 0.0001) +
geom_sf(data = us_states_east, color = NA, fill = "#D4D4D4") +
geom_sf(data = us_states,   color = "white", fill = NA, lwd = 0.2) +
geom_sf(data = us_boundary, color = "white", fill = NA, lwd = 0.3) +
geom_sf(data = wells_all_buffer_1km, fill = "black", color = NA, alpha = 0.6) +
xlim(-2300000, 560000) + ylim(340000, 3100000) +  # origin: 96W, 23N
labs(x = "", y = "") +
theme_void() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),
panel.grid       = element_line(color = "#e9f5f8"),
legend.position = "none")
# export
ggsave(filename = "figure_4a.png", plot = figure_4a, device = "png",
height = 4.818, width = 5, path = "output/figures/components/")
# attaches necessary packages
source("code/0-setup/01-setup.R")
library("ggspatial")
library("lubridate")
library("units")
# data input
wells_all <- readRDS("data/processed/wells_all.rds")
wildfires_wells_population <-
readRDS("data/processed/wildfires_wells_population.rds")
# figure 1c ................................................................
# count of oil and gas wells in wildfire burn areas by year
figure_1c <- wells_all %>%
drop_na(date_earliest)
# figure 1c ................................................................
# count of oil and gas wells in wildfire burn areas by year
figure_1c <- wells_all %>%
drop_na(date_earliest) %>%
mutate(year = year(date_earliest)) #%>%
figure_1c
glimpse(figure_1c)
# figure 1c ................................................................
# count of oil and gas wells in wildfire burn areas by year
figure_1c <- wells_all %>%
drop_na(date_earliest) %>%
mutate(year = as.factor(year(date_earliest))) #%>%
glimpse(figure_1c)
# figure 1c ................................................................
# count of oil and gas wells in wildfire burn areas by year
figure_1c <- wells_all %>%
drop_na(date_earliest) %>%
select(date_earliest) %>%
mutate(year = as.factor(year(date_earliest))) #%>%
# figure 1c ................................................................
# count of oil and gas wells in wildfire burn areas by year
figure_1c <- wells_all %>%
as_tibble() %>%
drop_na(date_earliest) %>%
select(date_earliest) %>%
mutate(year = as.factor(year(date_earliest))) #%>%
figure_1c
# figure 1c ................................................................
# count of oil and gas wells in wildfire burn areas by year
figure_1c <- wells_all %>%
as_tibble() %>%
drop_na(date_earliest) %>%
select(date_earliest) %>%
mutate(year = as.factor(year(date_earliest))) %>%
group_by(year) %>%
summarize(n_wells = n()) #%>%
figure_1c
glimpse(figure_1c)
# figure 1c ................................................................
# count of oil and gas wells in wildfire burn areas by year
figure_1c <- wells_all %>%
as_tibble() %>%
drop_na(date_earliest) %>%
select(date_earliest) %>%
mutate(year = as.factor(year(date_earliest))) %>%
group_by(year) %>%
summarize(n_wells = n()) %>%
ggplot()  +
geom_bar(aes(year, n_wells), stat = "identity") +
labs(x = "", y = "") +
theme_classic() +
theme(axis.line.x  = element_blank(),  # removes x-axis
axis.ticks.x = element_blank(),
axis.text.x  = element_blank(),
axis.text.y  = element_blank(),
legend.position = "none")
figure_1c
# figure 1c ................................................................
# count of oil and gas wells in wildfire burn areas by year
data_1c <- wells_all %>%
as_tibble() %>%
drop_na(date_earliest) %>%
select(date_earliest) %>%
mutate(year = as.factor(year(date_earliest))) %>%
group_by(year) %>%
summarize(n_wells = n())
data_1c
# figure 1c ................................................................
# count of oil and gas wells in wildfire burn areas by year
data_1c <- wells_all %>%
as_tibble() %>%
drop_na(date_earliest) %>%
select(date_earliest) %>%
mutate(year = year(date_earliest)) %>%
group_by(year) %>%
summarize(n_wells = n())
# figure 1c ................................................................
# count of oil and gas wells in wildfire burn areas by year
data_1c <- wells_all %>%
as_tibble() %>%
drop_na(date_earliest) %>%
select(date_earliest) %>%
mutate(year = year(date_earliest)) %>%
group_by(year) %>%
summarize(n_wells = n())
n_wells_pre1984 <- data_1c %>% filter(year < 1984)
n_wells_pre1984
wells_pre1984 <- data_1c %>% filter(year < 1984) %>% select()
wells_pre1984 <- data_1c %>% filter(year < 1984)
n_wells_pre1984 <- sum(wells_pre1984$n_wells)
# figure 1c ................................................................
# count of oil and gas wells in wildfire burn areas by year
wells_years <- wells_all %>%
as_tibble() %>%
drop_na(date_earliest) %>%
select(date_earliest) %>%
mutate(year = year(date_earliest)) %>%
group_by(year) %>%
summarize(n_wells = n())
wells_pre1984 <- wells_years %>% filter(year < 1984)
n_wells_pre1984 <- sum(wells_pre1984$n_wells)
data_1c <- wells_years %>%
filter(year >= 1984) %>%
mutate(n_wells = n_wells + n_wells_pre1984) %>%
mutate(year = as.factor(year))
data_1c
?cumsum
# preps data
wells_years <- wells_all %>%
as_tibble() %>%
drop_na(date_earliest) %>%
select(date_earliest) %>%
mutate(year = year(date_earliest)) %>%
group_by(year) %>%
summarize(n_wells = n()) %>%
mutate(n_wells_cumulative = cumsum(n_wells))
glimpse(wells_years)
View(wells_years)
filter(year >= 1984) %>%
mutate(year = as.factor(year))
# preps data
wells_years <- wells_all %>%
as_tibble() %>%
drop_na(date_earliest) %>%
select(date_earliest) %>%
mutate(year = year(date_earliest)) %>%
group_by(year) %>%
summarize(n_wells = n()) %>%
mutate(n_wells_cumulative = cumsum(n_wells)) %>%
filter(year >= 1984) %>%
mutate(year = as.factor(year))
wells_years
# preps data
wells_years <- wells_all %>%
as_tibble() %>%
mutate(date_earliest = replace_na(1900)) %>%
select(date_earliest) %>%
mutate(year = year(date_earliest)) %>%
group_by(year) %>%
summarize(n_wells = n()) %>%
mutate(n_wells_cumulative = cumsum(n_wells)) %>%
filter(year >= 1984) %>%
mutate(year = as.factor(year))
# preps data
wells_years <- wells_all %>%
as_tibble() %>%
mutate(date_earliest = replace_na(date_earliest, 1900)) %>%
select(date_earliest) %>%
mutate(year = year(date_earliest)) %>%
group_by(year) %>%
summarize(n_wells = n()) %>%
mutate(n_wells_cumulative = cumsum(n_wells)) %>%
filter(year >= 1984) %>%
mutate(year = as.factor(year))
# preps data
wells_years <- wells_all %>%
as_tibble() %>%
mutate(date_earliest = replace_na(date_earliest, as.Date("1900-01-01"))) %>%
select(date_earliest) %>%
mutate(year = year(date_earliest)) %>%
group_by(year) %>%
summarize(n_wells = n()) %>%
mutate(n_wells_cumulative = cumsum(n_wells)) %>%
filter(year >= 1984) %>%
mutate(year = as.factor(year))
wells_years
View(wells_years)
# makes figure
figure_1c <- data_1c %>%
ggplot()  +
geom_bar(aes(year, n_wells), stat = "identity") +
labs(x = "", y = "") +
theme_classic() +
theme(axis.line.x  = element_blank(),  # removes x-axis
axis.ticks.x = element_blank(),
axis.text.x  = element_blank(),
axis.text.y  = element_blank(),
legend.position = "none")
figure_1c
# preps data
data_1c <- wells_all %>%
as_tibble() %>%
mutate(date_earliest = replace_na(date_earliest, as.Date("1900-01-01"))) %>%
select(date_earliest) %>%
mutate(year = year(date_earliest)) %>%
group_by(year) %>%
summarize(n_wells = n()) %>%
mutate(n_wells_cumulative = cumsum(n_wells)) %>%
filter(year >= 1984) %>%
mutate(year = as.factor(year))
# makes figure
figure_1c <- data_1c %>%
ggplot()  +
geom_bar(aes(year, n_wells), stat = "identity") +
labs(x = "", y = "") +
theme_classic() +
theme(axis.line.x  = element_blank(),  # removes x-axis
axis.ticks.x = element_blank(),
axis.text.x  = element_blank(),
axis.text.y  = element_blank(),
legend.position = "none")
figure_1c
View(figure_1c)
View(wells_all)
View(data_1c)
# makes figure
figure_1c <- data_1c %>%
ggplot()  +
geom_bar(aes(year, n_wells_cumulative), stat = "identity") +
labs(x = "", y = "") +
theme_classic() +
theme(axis.line.x  = element_blank(),  # removes x-axis
axis.ticks.x = element_blank(),
axis.text.x  = element_blank(),
axis.text.y  = element_blank(),
legend.position = "none")
figure_1c
# figure 1b ................................................................
# total area burned by year
figure_1b <- wildfires_wells_population %>%
mutate(year = as.factor(year),
wildfire_area_km2 = (as.numeric(wildfire_area_m2) / 1000000)) %>%
group_by(year) %>%
summarize(area_burned_km2 = sum(wildfire_area_km2)) %>%
ggplot() +
geom_bar(aes(year, area_burned_km2), stat = "identity") +
labs(x = "", y = "") +
theme_classic() +
theme(axis.text.y  = element_blank(),
legend.position = "none")
figure_1b
# figure 1b ................................................................
# total area burned by year
figure_1b <- wildfires_wells_population %>%
mutate(year = as.factor(year),
wildfire_area_km2 = (as.numeric(wildfire_area_m2) / 1000000)) %>%
group_by(year) %>%
summarize(area_burned_km2 = sum(wildfire_area_km2)) %>%
ggplot() +
geom_bar(aes(year, area_burned_km2), stat = "identity") +
labs(x = "", y = "") +
theme_classic() +
theme(axis.text.x  = element_blank(),axis.text.y  = element_blank(),
legend.position = "none")
figure_1b
# figure 1b ................................................................
# total area burned by year
figure_1b <- wildfires_wells_population %>%
mutate(year = as.factor(year),
wildfire_area_km2 = (as.numeric(wildfire_area_m2) / 1000000)) %>%
group_by(year) %>%
summarize(area_burned_km2 = sum(wildfire_area_km2)) %>%
ggplot() +
geom_bar(aes(year, area_burned_km2), stat = "identity") +
labs(x = "", y = "") +
theme_classic() +
theme(axis.line.x  = element_blank(),  # removes x-axis
axis.ticks.x = element_blank(),
axis.text.x  = element_blank(),axis.text.y  = element_blank(),
legend.position = "none")
figure_1b
# makes figure
figure_1c <- data_1c %>%
ggplot()  +
geom_bar(aes(year, n_wells_cumulative), stat = "identity") +
labs(x = "", y = "") +
theme_classic() +
theme(axis.text.x  = element_blank(),
axis.text.y  = element_blank(),
legend.position = "none")
figure_1c
# exports figures
ggsave(filename = "figure_1b.png", plot = figure_1b, device = "png",
height = 1.5, width = 6, path = "output/figures/components/")
# exports figures
ggsave(filename = "figure_1c.png", plot = figure_1c, device = "png",
height = 1.7, width = 6, path = "output/figures/components/")
# exports figures
ggsave(filename = "figure_1c.png", plot = figure_1c, device = "png",
height = 1.6, width = 6, path = "output/figures/components/")
6*10/6
1.6*10/6
1.5*10/6
# figure 1b ................................................................
# total area burned by year
figure_1b <- wildfires_wells_population %>%
mutate(year = as.factor(year),
wildfire_area_km2 = (as.numeric(wildfire_area_m2) / 1000000)) %>%
group_by(year) %>%
summarize(area_burned_km2 = sum(wildfire_area_km2)) %>%
ggplot() +
geom_bar(aes(year, area_burned_km2), stat = "identity") +
labs(x = "", y = "") +
theme_classic() +
theme(axis.line.x  = element_blank(),  # removes x-axis
axis.ticks.x = element_blank(),
axis.text.x  = element_blank(),axis.text.y  = element_blank(),
legend.position = "none")
# exports figures
ggsave(filename = "figure_1b.png", plot = figure_1b, device = "png",
height = 2.5, width = 10, path = "output/figures/components/")
# preps data
data_1c <- wells_all %>%
as_tibble() %>%
mutate(date_earliest = replace_na(date_earliest, as.Date("1900-01-01"))) %>%
select(date_earliest) %>%
mutate(year = year(date_earliest)) %>%
group_by(year) %>%
summarize(n_wells = n()) %>%
mutate(n_wells_cumulative = cumsum(n_wells)) %>%
filter(year >= 1984) %>%
mutate(year = as.factor(year))
# makes figure
figure_1c <- data_1c %>%
ggplot()  +
geom_bar(aes(year, n_wells_cumulative), stat = "identity") +
labs(x = "", y = "") +
theme_classic() +
theme(axis.text.x  = element_blank(),
axis.text.y  = element_blank(),
legend.position = "none")
# exports figures
ggsave(filename = "figure_1c.png", plot = figure_1c, device = "png",
height = 2.667, width = 10, path = "output/figures/components/")
# figure 1b ................................................................
# total area burned by year
figure_1b <- wildfires_wells_population %>%
mutate(year = as.factor(year),
wildfire_area_km2 = (as.numeric(wildfire_area_m2) / 1000000)) %>%
group_by(year) %>%
summarize(area_burned_km2 = sum(wildfire_area_km2))# %>%
View(figure_1b)
# figure 1b ................................................................
# total area burned by year
figure_1b <- wildfires_wells_population %>%
mutate(year = as.factor(year),
wildfire_area_km2 = (as.numeric(wildfire_area_m2) / 1000000)) %>%
group_by(year) %>%
summarize(area_burned_km2 = sum(wildfire_area_km2)) %>%
ggplot() +
geom_bar(aes(year, area_burned_km2), stat = "identity") +
labs(x = "", y = "") +
theme_classic() #+
figure_1b
# attaches necessary packages
source("code/0-setup/01-setup.R")
# attaches necessary packages
source("code/0-setup/01-setup.R")
# data input
wildfires_wells_population <-
readRDS("data/processed/wildfires_wells_population.rds")
# figure 2a ................................................................
# count of oil and gas wells in wildfire burn areas by year
figure_2a <- wildfires_wells_population %>%
group_by(year) %>%
summarize(n_wells = sum(n_wells)) %>%
ggplot()  +
geom_bar(aes(year, n_wells), stat = "identity") +
labs(x = "", y = "") +
theme_classic() +
theme(axis.line.x  = element_blank(),  # removes x-axis
axis.ticks.x = element_blank(),
axis.text.x  = element_blank(),
axis.text.y  = element_blank(),
legend.position = "none")
figure_2a
# figure 3a ................................................................
# count of oil and gas wells in wildfire burn areas by year
figure_3a <- wildfires_wells_population %>%
group_by(year) %>%
summarize(n_wells = sum(n_wells)) %>%
ggplot()  +
geom_bar(aes(year, n_wells), stat = "identity") +
labs(x = "", y = "") +
theme_classic() +
theme(axis.line.x  = element_blank(),  # removes x-axis
axis.ticks.x = element_blank(),
axis.text.x  = element_blank(),
axis.text.y  = element_blank(),
legend.position = "none")
figure_3a
# figure 3b ................................................................
# estimated total U.S. population within 1 km of oil and gas wells that were in
# wildfire burn areas by year.
figure_3b <- wildfires_wells_population %>%
filter(n_wells > 0) %>%
group_by(year) %>%
summarize(n = n()) %>%
ggplot()  +
geom_bar(aes(year, n), stat = "identity") +
labs(x = "", y = "") +
theme_classic() +
theme(axis.line.x  = element_blank(),  # removes x-axis
axis.ticks.x = element_blank(),
axis.text.x  = element_blank(),
axis.text.y  = element_blank(),
legend.position = "none")
figure_3b
# exports figures
ggsave(filename = "figure_3a.png", plot = figure_3a, device = "png",
height = 2.2, width = 4, path = "output/figures/components/")
# figure 3c ................................................................
# estimated total U.S. population within 1 km of oil and gas wells that were in
# wildfire burn areas by year.
figure_3c <- wildfires_wells_population %>%
filter(n_wells > 0) %>%
group_by(year) %>%
summarize(n = n()) %>%
ggplot()  +
geom_bar(aes(year, n), stat = "identity") +
labs(x = "", y = "") +
theme_classic() +
theme(axis.line.x  = element_blank(),  # removes x-axis
axis.ticks.x = element_blank(),
axis.text.x  = element_blank(),
axis.text.y  = element_blank(),
legend.position = "none")
figure_3c
# figure 3c ................................................................
# estimated total U.S. population within 1 km of oil and gas wells that were in
# wildfire burn areas by year.
figure_3c <- wildfires_wells_population %>%
filter(n_wells > 0) %>%
group_by(year) %>%
summarize(n = n()) %>%
ggplot()  +
geom_bar(aes(year, n), stat = "identity") +
labs(x = "", y = "") +
theme_classic() +
theme(axis.text.x  = element_blank(),
axis.text.y  = element_blank(),
legend.position = "none")
# figure 3c ................................................................
# estimated total U.S. population within 1 km of oil and gas wells that were in
# wildfire burn areas by year.
figure_3c <- wildfires_wells_population %>%
filter(n_wells > 0) %>%
group_by(year) %>%
summarize(n = n()) %>%
ggplot()  +
geom_bar(aes(year, n), stat = "identity") +
labs(x = "", y = "") +
theme_classic() +
theme(#axis.text.x  = element_blank(),
axis.text.y  = element_blank(),
legend.position = "none")
# exports figures
ggsave(filename = "figure_3c.png", plot = figure_3c, device = "png",
height = 2.2, width = 4, path = "output/figures/components/")
# exports figures
ggsave(filename = "figure_3c.png", plot = figure_3c, device = "png",
height = 2.4, width = 4, path = "output/figures/components/")
# data input
wells_kbdi <- readRDS("data/processed/wells_kbdi.rds")
View(wells_kbdi)
# attaches necessary packages
source("code/0-setup/01-setup.R")
# data input
wells_all <- readRDS("data/processed/wells_all.rds")
wildfires_all <- readRDS("data/processed/wildfires_all.rds")
View(wildfires_all)
ks <- wildfires_all %>% filter(state == "KS")
ks
View(ks)
summary(as.factor(ks$year))
ks %>% filter(year==2017) %>% View
