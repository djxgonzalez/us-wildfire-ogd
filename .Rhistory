"MN", "IA", "MO", "AR", "LA")) %>%
filter(NAME %!in% c("American Samoa", "Guam", "Puerto Rico",
"Commonwealth of the Northern Mariana Islands",
"United States Virgin Islands", "Hawaii")) %>%
st_geometry() %>%
st_transform(crs_nad83)
mex_can <- st_read("data/raw/esri/Countries_WGS84.shp") %>%
filter(CNTRY_NAME %in% c("Canada", "Mexico")) %>%
st_geometry() %>%
st_transform(crs_nad83)
rus_can <- st_read("data/raw/esri/Countries_WGS84.shp") %>%
filter(CNTRY_NAME %in% c("Canada", "Russia")) %>%
st_geometry() %>%
st_transform(crs_nad83)
ggplot() +
geom_sf(data = mex_can, fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = us_states_east, fill = "#DCDCDC", color = "#ffffff", lwd = 0.3) +
geom_sf(data = us_states_west, fill = "#E6E9E0", color = "#ffffff", lwd = 0.3) +
xlim(-125, -93.5) + ylim(26, 49) +
theme_bw()
ggplot() +
#geom_sf(data = us_states_east, fill = "#DCDCDC", color = "#ffffff", lwd = 0.3) +
geom_sf(data = us_states_west, fill = "#E6E9E0", color = "#ffffff", lwd = 0.3) +
xlim(-125, -83.5) + ylim(26, 49) +
theme_bw()
ggplot() +
#geom_sf(data = us_states_east, fill = "#DCDCDC", color = "#ffffff", lwd = 0.3) +
geom_sf(data = us_states_west, fill = "#E6E9E0", color = "#ffffff", lwd = 0.3) +
xlim(-125, -87) + ylim(26, 49) +
theme_bw()
ggplot() +
#geom_sf(data = us_states_east, fill = "#DCDCDC", color = "#ffffff", lwd = 0.3) +
geom_sf(data = us_states_west, fill = "#E6E9E0", color = "#ffffff", lwd = 0.3) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw()
# attaches necessary packages
source("code/0-setup/01-setup.R")
# data input and prep
us_states <- st_read("data/raw/us_census/tl_2018_us_state.shp") %>%
filter(STUSPS %in% c("WA", "OR", "CA", "ID", "NV", "AZ", "MT", "WY",
"UT", "CO", "NM", "ND", "SD", "NE", "KS", "OK", "TX",
"MN", "IA", "MO", "AR", "LA", "WI", "MI", "IL", "IN",
"KY", "TN", "MS", "AL", "GA", "FL")) %>%
st_transform(crs_nad83)
us_boundary <- us_states %>% st_union()
mex_can <- st_read("data/raw/esri/Countries_WGS84.shp") %>%
filter(CNTRY_NAME %in% c("Canada", "Mexico")) %>%
st_geometry() %>%
st_transform(crs_nad83)
study_region_sf <- readRDS("data/interim/study_region_sf.rds")
kbdi_high_2017_sf <- readRDS("data/processed/kbdi_max_2017.rds") %>%
as_tibble() %>%
st_as_sf(coords = c("x", "y"), crs = crs_nad83) %>%
st_intersection(study_region_sf) %>%
mutate(kbdi_over_400 = case_when(kbdi_max_2017 >= 400 ~ 1,
kbdi_max_2017 <  400 ~ 0),
kbdi_over_600 = case_when(kbdi_max_2017 >= 600 ~ 1,
kbdi_max_2017 <  600 ~ 0))
kbdi_high_2050_sf <- readRDS("data/processed/kbdi_max_2050.rds") %>%
as_tibble() %>%
st_as_sf(coords = c("x", "y"), crs = crs_nad83) %>%
st_intersection(study_region_sf) %>%
mutate(kbdi_over_400 = case_when(kbdi_max_2050 >= 400 ~ 1,
kbdi_max_2050 <  400 ~ 0),
kbdi_over_600 = case_when(kbdi_max_2050 >= 600 ~ 1,
kbdi_max_2050 <  600 ~ 0))
kbdi_high_2090_sf <- readRDS("data/processed/kbdi_max_2090.rds") %>%
as_tibble() %>%
st_as_sf(coords = c("x", "y"), crs = crs_nad83) %>%
st_intersection(study_region_sf) %>%
mutate(kbdi_over_400 = case_when(kbdi_max_2090 >= 400 ~ 1,
kbdi_max_2090 <  400 ~ 0),
kbdi_over_600 = case_when(kbdi_max_2090 >= 600 ~ 1,
kbdi_max_2090 <  600 ~ 0))
# removes data no longer needed
rm(kbdi_high_2017_sf, kbdi_high_2050_sf, kbdi_high_2090_sf, study_region_sf)
## manuscript figure ---------------------------------------------------------
# figure 4a ................................................................
# setup
kbdi_400_2017 <-
kbdi_high_2017_sf %>% filter(kbdi_over_400 == 1) %>% st_geometry()
study_region_sf <- readRDS("data/interim/study_region_sf.rds")
kbdi_high_2017_sf <- readRDS("data/processed/kbdi_max_2017.rds") %>%
as_tibble() %>%
st_as_sf(coords = c("x", "y"), crs = crs_nad83) %>%
st_intersection(study_region_sf) %>%
mutate(kbdi_over_400 = case_when(kbdi_max_2017 >= 400 ~ 1,
kbdi_max_2017 <  400 ~ 0),
kbdi_over_600 = case_when(kbdi_max_2017 >= 600 ~ 1,
kbdi_max_2017 <  600 ~ 0))
kbdi_high_2050_sf <- readRDS("data/processed/kbdi_max_2050.rds") %>%
as_tibble() %>%
st_as_sf(coords = c("x", "y"), crs = crs_nad83) %>%
st_intersection(study_region_sf) %>%
mutate(kbdi_over_400 = case_when(kbdi_max_2050 >= 400 ~ 1,
kbdi_max_2050 <  400 ~ 0),
kbdi_over_600 = case_when(kbdi_max_2050 >= 600 ~ 1,
kbdi_max_2050 <  600 ~ 0))
kbdi_high_2090_sf <- readRDS("data/processed/kbdi_max_2090.rds") %>%
as_tibble() %>%
st_as_sf(coords = c("x", "y"), crs = crs_nad83) %>%
st_intersection(study_region_sf) %>%
mutate(kbdi_over_400 = case_when(kbdi_max_2090 >= 400 ~ 1,
kbdi_max_2090 <  400 ~ 0),
kbdi_over_600 = case_when(kbdi_max_2090 >= 600 ~ 1,
kbdi_max_2090 <  600 ~ 0))
# preps layers
kbdi_400_2017 <-
kbdi_high_2017_sf %>% filter(kbdi_over_400 == 1) %>% st_geometry()
kbdi_400_2050 <-
kbdi_high_2050_sf %>% filter(kbdi_over_400 == 1) %>% st_geometry()
kbdi_400_2090 <-
kbdi_high_2090_sf %>% filter(kbdi_over_400 == 1) %>% st_geometry()
kbdi_600_2017 <-
kbdi_high_2017_sf %>% filter(kbdi_over_600 == 1) %>% st_geometry()
kbdi_600_2050 <-
kbdi_high_2050_sf %>% filter(kbdi_over_600 == 1) %>% st_geometry()
kbdi_600_2090 <-
kbdi_high_2090_sf %>% filter(kbdi_over_600 == 1) %>% st_geometry()
# removes data no longer needed
rm(kbdi_high_2017_sf, kbdi_high_2050_sf, kbdi_high_2090_sf, study_region_sf)
## manuscript figure ---------------------------------------------------------
# figure 4a ................................................................
figure_4a <- ggplot() +
geom_sf(data = mex_can, fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = us_states, color = "black", fill = NA, lwd = 0.4) +
geom_sf(data = kbdi_400_2090, color = "yellow", size = 1) +
geom_sf(data = kbdi_400_2050, color = "orange", size = 1) +
geom_sf(data = kbdi_400_2017, color = "red", size = 1) +
geom_sf(data = us_states, color = "white", fill = NA, lwd = 0.4) +
geom_sf(data = us_boundary, color = "black", fill = NA, lwd = 0.8) +
xlim(-125, -89) + ylim(26, 49) +
theme_void()
# export
ggsave(filename = "figure_4a.png", plot = figure_4a, device = "png",
height = 6, width = 6, path = "output/figures/components/")
# figure 4b ................................................................
figure_4b <- ggplot() +
geom_sf(data = mex_can, fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = us_states, color = "black", fill = NA, lwd = 0.4) +
geom_sf(data = kbdi_400_2090, color = "yellow", size = 1) +
geom_sf(data = kbdi_400_2050, color = "orange", size = 1) +
geom_sf(data = kbdi_400_2017, color = "red", size = 1) +
geom_sf(data = us_states, color = "white", fill = NA, lwd = 0.4) +
geom_sf(data = us_boundary, color = "black", fill = NA, lwd = 0.8) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw()
# export
ggsave(filename = "figure_4ab.png", plot = figure_4b, device = "png",
height = 6, width = 6, path = "output/figures/components/")
# export
ggsave(filename = "figure_4ab.png", plot = figure_4b, device = "png",
height = 5, width = 6, path = "output/figures/components/")
# figure 4a ................................................................
figure_4a <- ggplot() +
geom_sf(data = mex_can, fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = us_states, color = "black", fill = NA, lwd = 0.4) +
geom_sf(data = kbdi_600_2090, color = "yellow", size = 1) +
geom_sf(data = kbdi_600_2050, color = "orange", size = 1) +
geom_sf(data = kbdi_600_2017, color = "red", size = 1) +
geom_sf(data = us_states, color = "white", fill = NA, lwd = 0.4) +
geom_sf(data = us_boundary, color = "black", fill = NA, lwd = 0.8) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw()
# export
ggsave(filename = "figure_4a.png", plot = figure_4a, device = "png",
height = 5, width = 6, path = "output/figures/components/")
# figure 4a ................................................................
figure_4a <- ggplot() +
geom_sf(data = mex_can, fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = us_states, color = "black", fill = NA, lwd = 0.5) +
geom_sf(data = kbdi_600_2090, color = "yellow", size = 1) +
geom_sf(data = kbdi_600_2050, color = "orange", size = 1) +
geom_sf(data = kbdi_600_2017, color = "red", size = 1) +
geom_sf(data = us_states, color = "white", fill = NA, lwd = 0.4) +
geom_sf(data = us_boundary, color = "black", fill = NA, lwd = 0.7) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),  # d0ecfd
panel.grid       = element_line(color = "#e9f5f8"))  # e8f4f8)
# export
ggsave(filename = "figure_4a.png", plot = figure_4a, device = "png",
height = 5, width = 6, path = "output/figures/components/")
# figure 4b ................................................................
figure_4b <- ggplot() +
geom_sf(data = mex_can, fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = us_states, color = "black", fill = NA, lwd = 0.5) +
geom_sf(data = kbdi_400_2090, color = "yellow", size = 1) +
geom_sf(data = kbdi_400_2050, color = "orange", size = 1) +
geom_sf(data = kbdi_400_2017, color = "red", size = 1) +
geom_sf(data = us_states, color = "white", fill = NA, lwd = 0.4) +
geom_sf(data = us_boundary, color = "black", fill = NA, lwd = 0.7) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),  # d0ecfd
panel.grid       = element_line(color = "#e9f5f8"))  # e8f4f8)
# export
ggsave(filename = "figure_4b.png", plot = figure_4b, device = "png",
height = 5, width = 6, path = "output/figures/components/")
# figure 4b ................................................................
figure_4b <- ggplot() +
geom_sf(data = mex_can, fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = kbdi_400_2090, color = "yellow", size = 1) +
geom_sf(data = kbdi_400_2050, color = "orange", size = 1) +
geom_sf(data = kbdi_400_2017, color = "red", size = 1) +
geom_sf(data = us_states,   color = "black", fill = NA, lwd = 0.4) +
geom_sf(data = us_boundary, color = "black", fill = NA, lwd = 0.7) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),  # d0ecfd
panel.grid       = element_line(color = "#e9f5f8"))  # e8f4f8)
# export
ggsave(filename = "figure_4b.png", plot = figure_4b, device = "png",
height = 5, width = 6, path = "output/figures/components/")
# figure 4a ................................................................
figure_4a <- ggplot() +
geom_sf(data = mex_can, fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = kbdi_600_2090, color = "yellow", size = 1) +
geom_sf(data = kbdi_600_2050, color = "orange", size = 1) +
geom_sf(data = kbdi_600_2017, color = "red", size = 1) +
geom_sf(data = us_states,   color = "black", fill = NA, lwd = 0.4) +
geom_sf(data = us_boundary, color = "black", fill = NA, lwd = 0.7) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),  # d0ecfd
panel.grid       = element_line(color = "#e9f5f8"))  # e8f4f8)
# export
ggsave(filename = "figure_4a.png", plot = figure_4a, device = "png",
height = 5, width = 6, path = "output/figures/components/")
# figure 4a ................................................................
figure_4a <- ggplot() +
geom_sf(data = mex_can, fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = kbdi_600_2090, color = "yellow", size = 0.5) +
geom_sf(data = kbdi_600_2050, color = "orange", size = 0.5) +
geom_sf(data = kbdi_600_2017, color = "red",    size = 0.5) +
geom_sf(data = us_states,   color = "black", fill = NA, lwd = 0.4) +
geom_sf(data = us_boundary, color = "black", fill = NA, lwd = 0.7) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),  # d0ecfd
panel.grid       = element_line(color = "#e9f5f8"))  # e8f4f8)
# export
ggsave(filename = "figure_4a.png", plot = figure_4a, device = "png",
height = 5, width = 6, path = "output/figures/components/")
# figure 4b ................................................................
figure_4b <- ggplot() +
geom_sf(data = mex_can, fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = kbdi_400_2090, color = "yellow", size = 0.5) +
geom_sf(data = kbdi_400_2050, color = "orange", size = 0.5) +
geom_sf(data = kbdi_400_2017, color = "red",    size = 0.5) +
geom_sf(data = us_states,   color = "black", fill = NA, lwd = 0.4) +
geom_sf(data = us_boundary, color = "black", fill = NA, lwd = 0.7) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),  # d0ecfd
panel.grid       = element_line(color = "#e9f5f8"))  # e8f4f8)
# export
ggsave(filename = "figure_4b.png", plot = figure_4b, device = "png",
height = 5, width = 6, path = "output/figures/components/")
# figure 4a ................................................................
figure_4a <- ggplot() +
geom_sf(data = mex_can, fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = kbdi_600_2090, color = "yellow", size = 0.5) +
geom_sf(data = kbdi_600_2050, color = "orange", size = 0.5) +
geom_sf(data = kbdi_600_2017, color = "red",    size = 0.5) +
geom_sf(data = us_states,   color = "black", fill = NA, lwd = 0.2) +
geom_sf(data = us_boundary, color = "black", fill = NA, lwd = 0.4) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),  # d0ecfd
panel.grid       = element_line(color = "#e9f5f8"))  # e8f4f8)
# export
ggsave(filename = "figure_4a.png", plot = figure_4a, device = "png",
height = 5, width = 6, path = "output/figures/components/")
lakes <- st_read("data/raw/noaa/gshhg-shp-2.3.7/GSHHS_shp/l/GSHHS_l_L2.shp") %>%
st_make_valid() %>%
st_transform(crs_nad83) %>%
st_union()
oil_basin_union <-
st_read("data/raw/us_eia/SedimentaryBasins_US_EIA/SedimentaryBasins_US_May2011_v2.shp") %>%
st_transform(crs_nad83) %>%
st_union()
oil_basin_union <-
st_read("data/raw/us_eia/SedimentaryBasins_US_EIA/SedimentaryBasins_US_May2011_v2.shp") %>%
st_transform(crs_nad83) %>%
st_union()
oil_basin_union <-
st_read("data/raw/us_eia/SedimentaryBasins_US_EIA/SedimentaryBasins_US_May2011_v2.shp") %>%
st_transform(crs_nad83) %>%
st_union()
oil_basin_union <-
st_read("data/raw/us_eia/SedimentaryBasins_US_EIA/SedimentaryBasins_US_May2011_v2.shp") %>%
st_transform(crs_nad83) %>%
st_union()
oil_basin_union <-
st_read("data/raw/us_eia/SedimentaryBasins_US_EIA/SedimentaryBasins_US_May2011_v2.shp") #%>%
oil_basin_union <-
st_read("data/raw/us_eia/SedimentaryBasins_US_EIA/SedimentaryBasins_US_May2011_v2.shp") %>%
st_transform(crs_nad83) #%>%
oil_basin_union <-
st_read("data/raw/us_eia/SedimentaryBasins_US_EIA/SedimentaryBasins_US_May2011_v2.shp") %>%
st_transform(crs_nad83) %>%
st_make_valid()
oil_basin_union <-
st_read("data/raw/us_eia/SedimentaryBasins_US_EIA/SedimentaryBasins_US_May2011_v2.shp") %>%
st_transform(crs_nad83) %>%
st_make_valid() %>%
st_union()
plot(oil_basin_union)
# figure 4a ................................................................
figure_4a <- ggplot() +
geom_sf(data = mex_can,       fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = us_states,     color = NA, fill = "#E6E9E0") +
geom_sf(data = lakes,         fill = "#e9f5f8", color = NA) +
geom_sf(data = kbdi_600_2090, color = "yellow", size = 0.5) +
geom_sf(data = kbdi_600_2050, color = "orange", size = 0.5) +
geom_sf(data = kbdi_600_2017, color = "red",    size = 0.5) +
geom_sf(data = us_states,     color = "black", fill = NA, lwd = 0.2) +
geom_sf(data = us_boundary,   color = "black", fill = NA, lwd = 0.4) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),  # d0ecfd
panel.grid       = element_line(color = "#e9f5f8"))  # e8f4f8)
# export
ggsave(filename = "figure_4a.png", plot = figure_4a, device = "png",
height = 5, width = 6, path = "output/figures/components/")
# figure 4b ................................................................
figure_4b <- ggplot() +
geom_sf(data = mex_can, fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = us_states,     color = NA, fill = "#E6E9E0") +
geom_sf(data = lakes,         fill = "#e9f5f8", color = NA) +
geom_sf(data = kbdi_400_2090, color = "yellow", size = 0.5) +
geom_sf(data = kbdi_400_2050, color = "orange", size = 0.5) +
geom_sf(data = kbdi_400_2017, color = "red",    size = 0.5) +
geom_sf(data = us_states,   color = "black", fill = NA, lwd = 0.2) +
geom_sf(data = us_boundary, color = "black", fill = NA, lwd = 0.4) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),  # d0ecfd
panel.grid       = element_line(color = "#e9f5f8"))  # e8f4f8)
# export
ggsave(filename = "figure_4b.png", plot = figure_4b, device = "png",
height = 5, width = 6, path = "output/figures/components/")
# figure 4a ................................................................
figure_4a <- ggplot() +
geom_sf(data = mex_can,       fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = us_states,     color = NA, fill = "white") +
geom_sf(data = lakes,         fill = "#e9f5f8", color = NA) +
geom_sf(data = kbdi_600_2090, color = "yellow", size = 0.5) +
geom_sf(data = kbdi_600_2050, color = "orange", size = 0.5) +
geom_sf(data = kbdi_600_2017, color = "red",    size = 0.5) +
geom_sf(data = us_states,     color = "black", fill = NA, lwd = 0.2) +
geom_sf(data = us_boundary,   color = "black", fill = NA, lwd = 0.4) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),  # d0ecfd
panel.grid       = element_line(color = "#e9f5f8"))  # e8f4f8)
# export
ggsave(filename = "figure_4a.png", plot = figure_4a, device = "png",
height = 5, width = 6, path = "output/figures/components/")
# figure 4b ................................................................
figure_4b <- ggplot() +
geom_sf(data = mex_can, fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = us_states,     color = NA, fill = "white") +
geom_sf(data = lakes,         fill = "#e9f5f8", color = NA) +
geom_sf(data = kbdi_400_2090, color = "yellow", size = 0.5) +
geom_sf(data = kbdi_400_2050, color = "orange", size = 0.5) +
geom_sf(data = kbdi_400_2017, color = "red",    size = 0.5) +
geom_sf(data = us_states,   color = "black", fill = NA, lwd = 0.2) +
geom_sf(data = us_boundary, color = "black", fill = NA, lwd = 0.4) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),  # d0ecfd
panel.grid       = element_line(color = "#e9f5f8"))  # e8f4f8)
# export
ggsave(filename = "figure_4b.png", plot = figure_4b, device = "png",
height = 5, width = 6, path = "output/figures/components/")
# figure 4a ................................................................
figure_4a <- ggplot() +
geom_sf(data = mex_can,       fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = us_states,     color = NA, fill = "white") +
geom_sf(data = lakes,         fill = "#e9f5f8", color = NA) +
geom_sf(data = kbdi_600_2090, color = "yellow", size = 0.3) +
geom_sf(data = kbdi_600_2050, color = "orange", size = 0.3) +
geom_sf(data = kbdi_600_2017, color = "red",    size = 0.3) +
geom_sf(data = us_states,     color = "black", fill = NA, lwd = 0.2) +
geom_sf(data = us_boundary,   color = "black", fill = NA, lwd = 0.4) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),  # d0ecfd
panel.grid       = element_line(color = "#e9f5f8"))  # e8f4f8)
# export
ggsave(filename = "figure_4a.png", plot = figure_4a, device = "png",
height = 5, width = 6, path = "output/figures/components/")
# figure 4b ................................................................
figure_4b <- ggplot() +
geom_sf(data = mex_can, fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = us_states,     color = NA, fill = "white") +
geom_sf(data = lakes,         fill = "#e9f5f8", color = NA) +
geom_sf(data = kbdi_400_2090, color = "yellow", size = 0.3) +
geom_sf(data = kbdi_400_2050, color = "orange", size = 0.3) +
geom_sf(data = kbdi_400_2017, color = "red",    size = 0.3) +
geom_sf(data = us_states,   color = "black", fill = NA, lwd = 0.2) +
geom_sf(data = us_boundary, color = "black", fill = NA, lwd = 0.4) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),  # d0ecfd
panel.grid       = element_line(color = "#e9f5f8"))  # e8f4f8)
# export
ggsave(filename = "figure_4b.png", plot = figure_4b, device = "png",
height = 5, width = 6, path = "output/figures/components/")
# figure 4a ................................................................
figure_4a <- ggplot() +
geom_sf(data = mex_can,       fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = us_states,     color = NA, fill = "white") +
geom_sf(data = lakes,         fill = "#e9f5f8", color = NA) +
geom_sf(data = kbdi_600_2090, color = "yellow", size = 0.1) +
geom_sf(data = kbdi_600_2050, color = "orange", size = 0.1) +
geom_sf(data = kbdi_600_2017, color = "red",    size = 0.1) +
geom_sf(data = us_states,     color = "black", fill = NA, lwd = 0.2) +
geom_sf(data = us_boundary,   color = "black", fill = NA, lwd = 0.4) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),  # d0ecfd
panel.grid       = element_line(color = "#e9f5f8"))  # e8f4f8)
# export
ggsave(filename = "figure_4a.png", plot = figure_4a, device = "png",
height = 5, width = 6, path = "output/figures/components/")
# figure 4b ................................................................
figure_4b <- ggplot() +
geom_sf(data = mex_can, fill = "#DCDCDC", color = NA, alpha = 0.7) +
geom_sf(data = us_states,     color = NA, fill = "white") +
geom_sf(data = lakes,         fill = "#e9f5f8", color = NA) +
geom_sf(data = kbdi_400_2090, color = "yellow", size = 0.1) +
geom_sf(data = kbdi_400_2050, color = "orange", size = 0.1) +
geom_sf(data = kbdi_400_2017, color = "red",    size = 0.1) +
geom_sf(data = us_states,   color = "black", fill = NA, lwd = 0.2) +
geom_sf(data = us_boundary, color = "black", fill = NA, lwd = 0.4) +
xlim(-125, -89) + ylim(26, 49) +
theme_bw() +
theme(panel.background = element_rect(fill  = "#e9f5f8"),  # d0ecfd
panel.grid       = element_line(color = "#e9f5f8"))  # e8f4f8)
# export
ggsave(filename = "figure_4b.png", plot = figure_4b, device = "png",
height = 5, width = 6, path = "output/figures/components/")
# attaches packages we need for this script
source("code/0-setup/01-setup.R")
wildfires_nifc <- readRDS("data/raw/nifc/nifc_wildfires_1000acre.rds") %>%
as_tibble() %>%
st_as_sf() %>%
mutate(wildfire_id   = as.factor(OBJECTID),
wildfire_name = as.factor(INCIDENT),
year          = FIRE_YEAR,
state         = as.factor(STUSPS10),
data_source   = as.factor("NIFC")) %>%
rename(geometry = SHAPE) %>%
select(wildfire_id:data_source, geometry)
wildfires_mtbs <- readRDS("data/raw/mtbs/wildfires_mtbs.rds") %>%
mutate(wildfire_id   = as.factor(Event_ID),
wildfire_name = as.factor(Incid_Name),
year          = Ig_Year,
state         = as.factor(State_Name),
data_source   = as.factor("MTBS")) %>%
select(wildfire_id:data_source, geometry)
d <- wildfires_nifc %>% filter(wildfire_id == "7043")
View(d)
plot(d)
View(subset(wildfires_nifc, duplicated(wildfires_nifc$wildfire_id)))
d <- wildfires_nifc %>% filter(wildfire_id == "23270")
plot(d)
View(subset(wildfires_mtbs, duplicated(wildfires_mtbs$wildfire_id)))
d <- wildfires_mtbs %>% filter(wildfire_id == "24607")
plot(d)
View(d)
d %>% select(state) %>%  plot
plot(d[1])
plot(d[2])
plot(d[1, ])
plot(d[2, ])
plot(d[1, ])
plot(d[2, ])
d <- wildfires_nifc %>% filter(wildfire_id == "23270")
View(d)
# binds wildfires from the two datasets and adds additional data on size
wildfires_all <- bind_rows(wildfires_nifc, wildfires_mtbs)
wildfires_nifc <- readRDS("data/raw/nifc/nifc_wildfires_1000acre.rds") %>%
as_tibble() %>%
st_as_sf() %>%
mutate(wildfire_id   = as.factor(OBJECTID),
wildfire_name = as.factor(INCIDENT),
year          = as.numeric(FIRE_YEAR),
state         = as.factor(STUSPS10),
data_source   = as.factor("NIFC")) %>%
rename(geometry = SHAPE) %>%
select(wildfire_id:data_source, geometry)
wildfires_mtbs <- readRDS("data/raw/mtbs/wildfires_mtbs.rds") %>%
mutate(wildfire_id   = as.factor(Event_ID),
wildfire_name = as.factor(Incid_Name),
year          = as.numeric(Ig_Year),
state         = as.factor(State_Name),
data_source   = as.factor("MTBS")) %>%
select(wildfire_id:data_source, geometry)
# binds wildfires from the two datasets and adds additional data on size
wildfires_all <- bind_rows(wildfires_nifc, wildfires_mtbs)
rm(d)
length(unique(wildfires_all$wildfire_id))
nrow(wildfires_all) - length(unique(wildfires_all$wildfire_id))
d <- wildfires_all %>% filter(wildfire_id == "1")
View(d)
plot(d)
plot(d[1, ])
plot(d[2, ])
